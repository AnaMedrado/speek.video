(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{KgRm:function(t,e,i){"use strict";i.r(e),i.d(e,"SettingModule",function(){return I});var o=i("3Pt+"),n=i("ofXK"),a=i("tyNb"),s=i("fXoL"),c=i("CTL+"),r=i("bTqV"),m=i("NFeN"),l=i("Wp6s"),b=i("wZkO");function d(t,e){if(1&t&&(s.Sb(0,"a",4),s.yc(1),s.Rb()),2&t){const t=e.$implicit,i=s.dc();s.ic("routerLink",t.route)("active",i.router.url==t.route),s.Bb(1),s.Ac(" ",t.label," ")}}let u=(()=>{class t{constructor(t){this.router=t,this.links=[{route:"/setting/audio",label:"\xc1udio"},{route:"/setting/video",label:"V\xeddeo"}]}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(a.b))},t.\u0275cmp=s.Gb({type:t,selectors:[["speek-setting"]],decls:10,vars:2,consts:[["routerLink","/","aria-label","P\xe1gina inicial","mat-icon-button",""],[1,"brand-name"],["mat-tab-nav-bar","","mat-stretch-tabs","","dynamicHeight","",3,"backgroundColor"],["mat-tab-link","",3,"routerLink","active",4,"ngFor","ngForOf"],["mat-tab-link","",3,"routerLink","active"]],template:function(t,e){1&t&&(s.Sb(0,"speek-toolbar"),s.Sb(1,"a",0),s.Sb(2,"mat-icon"),s.yc(3,"arrow_backward"),s.Rb(),s.Rb(),s.Sb(4,"span",1),s.yc(5," configura\xe7\xf5es "),s.Rb(),s.Rb(),s.Sb(6,"mat-card"),s.Sb(7,"nav",2),s.wc(8,d,2,3,"a",3),s.Rb(),s.Nb(9,"router-outlet"),s.Rb()),2&t&&(s.Bb(7),s.ic("backgroundColor","primary"),s.Bb(1),s.ic("ngForOf",e.links))},directives:[c.a,a.c,r.a,m.a,l.a,b.b,n.j,a.e,b.a],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:center;align-items:center}[_nghost-%COMP%]   .mat-card[_ngcontent-%COMP%]{border:2px dotted #464646;transition:height .5s ease-in-out}"]}),t})();var h=i("mrSG"),p=i("7+mf"),v=i("0Z/k"),f=i("GhD8"),g=i("XNiG"),O=i("2Vo4"),S=i("1G5W"),C=i("f0Cb"),_=i("MutI"),M=i("5RNC"),y=i("kmnG"),P=i("d3UM"),R=i("FKr1");const w=["canvas"];function x(t,e){if(1&t&&(s.Sb(0,"mat-option",8),s.yc(1),s.Rb()),2&t){const t=e.$implicit;s.ic("value",t),s.Bb(1),s.Ac(" ",t.label," ")}}let k=(()=>{class t{constructor(t){this.userSetup=t,this._destroy=new g.a,this.form=new p.l,this._devices=new O.a([]),this.devices$=this._devices.asObservable()}ngOnInit(){const t=this.userSetup.getStoredValue();this.form.patchValue(t||{})}ngAfterViewInit(){this.form.getDevices("audioinput").then(t=>{this._devices.next(t.map(t=>t.toJSON())),!this.form.audio.value&&this.form.pitch.enabled&&this.form.pitch.disable(),this.form.audio.value&&this.getStream(this.form.audio.value)}),this.form.valueChanges.pipe(Object(S.a)(this._destroy)).subscribe(({pitch:t})=>{this.form.valid&&(this.voice.setPitchOffset(t),this.userSetup.update(this.form.value))})}onDeviceChange(t){t&&(this.getStream(t),this.form.pitch.disabled&&this.form.pitch.enable())}getStream({deviceId:t}){return Object(h.a)(this,void 0,void 0,function*(){return Object(v.b)(this.stream),navigator.mediaDevices.getUserMedia({audio:{deviceId:t,echoCancellation:!0,noiseSuppression:!0}}).then(t=>this.gotStream(t))})}gotStream(t){this.stream=t;const e=new AudioContext,i=e.createMediaStreamSource(t),o=e.createAnalyser(),n=e.createDelay();n.delayTime.value=0,i.connect(n),this.voice=new v.a(e);const{value:a}=this.form.pitch;this.voice.setPitchOffset(a),n.connect(this.voice.input),this.voice.output.connect(e.destination),this.voice.output.connect(o),Object(p.m)(this.canvas.nativeElement,o),this.voice.setPitchOffset(this.form.pitch.value)}compareFn(t,e){return t&&e?t.deviceId===e.deviceId:t===e}ngOnDestroy(){this.stream&&Object(v.b)(this.stream),this._destroy.next(),this._destroy.complete()}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(f.b))},t.\u0275cmp=s.Gb({type:t,selectors:[["speek-audio"]],viewQuery:function(t,e){if(1&t&&s.Bc(w,1),2&t){let t;s.mc(t=s.ac())&&(e.canvas=t.first)}},decls:27,vars:5,consts:[[3,"formGroup"],["canvas",""],["mat-subheader",""],["min","-1.2","max","1.2","step","0.2","thumbLabel","","formControlName","pitch"],["color","accent","appearance","outline"],["placeholder","Selecione um dispositivo","formControlName","audio",3,"compareWith","selectionChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(s.Sb(0,"form",0),s.Nb(1,"canvas",null,1),s.Nb(3,"mat-divider"),s.Sb(4,"mat-list"),s.Sb(5,"h3",2),s.yc(6,"Arraste para ajustar o tom da sua voz"),s.Rb(),s.Rb(),s.Sb(7,"section"),s.Sb(8,"span"),s.yc(9,"-1.2"),s.Rb(),s.Nb(10,"mat-slider",3),s.Sb(11,"span"),s.yc(12,"1.2"),s.Rb(),s.Rb(),s.Sb(13,"mat-list"),s.Sb(14,"h3",2),s.yc(15,"Sua voz \xe9 normalizada fica em 0 (zero)"),s.Rb(),s.Rb(),s.Nb(16,"mat-divider"),s.Sb(17,"mat-form-field",4),s.Sb(18,"mat-select",5),s.Zb("selectionChange",function(t){return e.onDeviceChange(t.value)}),s.Sb(19,"mat-option",6),s.yc(20," Selecione um dispositivo "),s.Rb(),s.wc(21,x,2,2,"mat-option",7),s.ec(22,"async"),s.Rb(),s.Sb(23,"mat-hint"),s.yc(24,"Este ser\xe1 seu microfone"),s.Rb(),s.Sb(25,"mat-error"),s.yc(26,"Selecione um dispositivo"),s.Rb(),s.Rb(),s.Rb()),2&t&&(s.ic("formGroup",e.form),s.Bb(18),s.ic("compareWith",e.compareFn),s.Bb(3),s.ic("ngForOf",s.fc(22,3,e.devices$)))},directives:[o.q,o.m,o.h,C.a,_.a,_.e,M.a,o.l,o.f,y.c,P.a,R.j,n.j,y.f,y.b],pipes:[n.b],styles:["[_nghost-%COMP%]{height:390px}[_nghost-%COMP%], [_nghost-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .mat-divider[_ngcontent-%COMP%]{position:unset}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .mat-list.mat-list-base[_ngcontent-%COMP%]{padding-top:0}[_nghost-%COMP%]   form[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 10px}[_nghost-%COMP%]   form[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{letter-spacing:2px;display:inline-flex}[_nghost-%COMP%]   form[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]   .mat-slider[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   form[_ngcontent-%COMP%] > section[_ngcontent-%COMP%] + .mat-list[_ngcontent-%COMP%]   .mat-subheader[_ngcontent-%COMP%]{margin-top:-20px}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{bottom:0;width:300px;margin:10px}"]}),t})();const j=["video"];function N(t,e){if(1&t&&(s.Sb(0,"mat-option",11),s.yc(1),s.Rb()),2&t){const t=e.$implicit;s.ic("value",t),s.Bb(1),s.Ac(" ",t.label," ")}}let F=(()=>{class t{constructor(t){this.userSetup=t,this.form=new p.l,this._devices=new O.a([]),this.devices$=this._devices.asObservable()}ngOnInit(){const t=this.userSetup.getStoredValue();this.form.patchValue(t||{})}ngAfterViewInit(){this.form.getDevices("videoinput").then(t=>{this._devices.next(t.map(t=>t.toJSON()))})}onDeviceChange(t){t&&this.getStream(t),this.form.valid&&this.userSetup.update(this.form.value)}getStream({deviceId:t}){return Object(h.a)(this,void 0,void 0,function*(){return navigator.mediaDevices.getUserMedia({video:{deviceId:t}}).then(t=>this.gotStream(this.video,t))})}gotStream({nativeElement:t},e){t.srcObject=e,this.stream=e}toggleVideo(){var t;(null===(t=this.stream)||void 0===t?void 0:t.active)?(Object(v.b)(this.stream),this.stopVideo(this.video)):this.getStream(this.form.video.value)}stopVideo({nativeElement:t}){t.srcObject=null}compareFn(t,e){return t&&e?t.deviceId===e.deviceId:t===e}ngOnDestroy(){this.stream&&Object(v.b)(this.stream)}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(f.b))},t.\u0275cmp=s.Gb({type:t,selectors:[["speek-video"]],viewQuery:function(t,e){if(1&t&&s.Bc(j,1),2&t){let t;s.mc(t=s.ac())&&(e.video=t.first)}},decls:27,vars:7,consts:[["muted","","autoplay","","playsinline","","poster","/assets/images/speek-light.svg"],["video",""],["mat-subheader",""],["mat-list-icon",""],["mat-line",""],["type","button","mat-icon-button","",3,"disabled","click"],[3,"formGroup"],["color","accent","appearance","outline"],["placeholder","Selecione um dispositivo","formControlName","video",3,"compareWith","selectionChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(s.Sb(0,"section"),s.Nb(1,"video",0,1),s.Rb(),s.Nb(3,"mat-divider"),s.Sb(4,"mat-list"),s.Sb(5,"h3",2),s.yc(6,"Ative ou desative o preview de v\xeddeo"),s.Rb(),s.Sb(7,"mat-list-item"),s.Sb(8,"mat-icon",3),s.yc(9,"video_settings"),s.Rb(),s.Sb(10,"h3",4),s.yc(11,"V\xeddeo"),s.Rb(),s.Sb(12,"button",5),s.Zb("click",function(){return e.toggleVideo()}),s.Sb(13,"mat-icon"),s.yc(14),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Nb(15,"mat-divider"),s.Sb(16,"form",6),s.Sb(17,"mat-form-field",7),s.Sb(18,"mat-select",8),s.Zb("selectionChange",function(t){return e.onDeviceChange(t.value)}),s.Sb(19,"mat-option",9),s.yc(20," Selecione um dispositivo "),s.Rb(),s.wc(21,N,2,2,"mat-option",10),s.ec(22,"async"),s.Rb(),s.Sb(23,"mat-hint"),s.yc(24,"Esta ser\xe1 sua c\xe2mera"),s.Rb(),s.Sb(25,"mat-error"),s.yc(26,"Selecione um dispositivo"),s.Rb(),s.Rb(),s.Rb()),2&t&&(s.Bb(12),s.ic("disabled",!e.form.video.value),s.Bb(2),s.Ac(" ",null!=e.stream&&e.stream.active?"videocam":"videocam_off"," "),s.Bb(2),s.ic("formGroup",e.form),s.Bb(2),s.ic("compareWith",e.compareFn),s.Bb(3),s.ic("ngForOf",s.fc(22,5,e.devices$)))},directives:[C.a,_.a,_.e,_.c,m.a,_.b,R.h,r.b,o.q,o.m,o.h,y.c,P.a,o.l,o.f,R.j,n.j,y.f,y.b],pipes:[n.b],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:390px}[_nghost-%COMP%]   .mat-list.mat-list-base[_ngcontent-%COMP%]{padding-top:0}[_nghost-%COMP%]   .mat-divider[_ngcontent-%COMP%]{position:unset}[_nghost-%COMP%] > section[_ngcontent-%COMP%]{position:relative;padding-bottom:56.25%;height:0}[_nghost-%COMP%] > section[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{bottom:0;width:300px;margin:10px}"]}),t})();var B=i("W5dm");const V=[{path:"",component:u,children:[{path:"",redirectTo:"audio"},{path:"audio",component:k},{path:"video",component:F}]}];let I=(()=>{class t{}return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(e){return new(e||t)},imports:[[n.c,p.i,B.a,o.o,a.d.forChild(V)]]}),t})()}}]);